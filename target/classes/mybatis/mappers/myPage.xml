<?xml version="1.0" encoding="UTF-8"?>


<!DOCTYPE mapper
      PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
   "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
   
   
<!-- 마이페이지와 관련한 모든 쿼리문장은 여기에서 관리함 -->

<mapper namespace="com.fun.myPage">


	<!-- bakcer 테이블 가져오기 -->
	<select id="backerInfo" resultType="com.fun.myPage.dto.backerDTO" parameterType="String">
		<![CDATA[
		SELECT * FROM backer WHERE id=#{id}
		]]>
	</select>
	
	<!-- p_seq값으로 프로젝트 테이블 가져오기 -->
	<select id="projectInfo" resultType="com.fun.subPage.dto.projectDTO" parameterType="String">
		<![CDATA[
		SELECT * FROM project WHERE p_seq=#{p_seq}
		]]>
	</select>
	
	<!-- 후원 & 관심목록에서 없애기 -->
	<delete id="deleteProject" parameterType="com.fun.myPage.dto.backerDTO">
		<![CDATA[
		DELETE FROM backer WHERE p_seq=#{p_seq} AND is_like=#{is_like} AND id=#{id}
		]]>
	</delete>
	
	<!-- 카드 정보 입력 -->
	<insert id="addCard" parameterType="com.fun.myPage.dto.cardInfoDTO">
		<![CDATA[
		insert into cardInfo (id, ci_num1, ci_num2, ci_num3, ci_num4, ci_month, ci_year, ci_pass, ci_birth)
		values (#{id}, #{ci_num1}, #{ci_num2}, #{ci_num3}, #{ci_num4}, #{ci_month}, #{ci_year}, #{ci_pass}, #{ci_birth})
		]]>
	</insert>
	
	<!-- 계좌 정보 입력 -->
	<insert id="addAccount" parameterType="com.fun.myPage.dto.accountInfoDTO">
		<![CDATA[
		insert into accountInfo (id, ai_bank, ai_num, ai_name, ai_birth)
		values (#{id}, #{ai_bank}, #{ai_num}, #{ai_name}, #{ai_birth})
		]]>
	</insert>
	
	<!-- 결제 수단  -->
	
	<select id="cardList" resultType="com.fun.myPage.dto.cardInfoDTO" parameterType="String">
		<![CDATA[
		SELECT ci_num4 FROM cardInfo where id=#{id}	
		]]>
	</select>
	<!-- r_seq 값이 있는 경우만. 리워드 테이블 가져오기 -->

</mapper>